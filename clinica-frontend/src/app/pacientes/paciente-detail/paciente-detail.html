<div class="detail-container">

  <button mat-stroked-button (click)="volver()" style="margin: 10px 20px;">
    <mat-icon>arrow_back</mat-icon> Volver al Dashboard
  </button>

  @if (errorCarga) {
    <div style="padding: 0 20px;">
      <mat-card class="mat-error-card" style="background-color: #fdecea; color: #a04446; padding: 15px;">
        <mat-card-content>{{ errorCarga }}</mat-card-content>
      </mat-card>
    </div>
  } @else if (paciente$ | async; as paciente) {
     @if (paciente) {
      <mat-sidenav-container class="sidenav-container">

        <mat-sidenav mode="side" opened class="sidenav-panel" style="width: 240px; border-right: 1px solid rgba(0,0,0,.12); background: #f5f5f5;">
          <h3 style="padding: 15px 16px; margin: 0; border-bottom: 1px solid rgba(0,0,0,.1);">Secciones Paciente</h3>
          <mat-nav-list>
             <a mat-list-item routerLink="./datos-personales" routerLinkActive="active-link">
              <mat-icon matListItemIcon>person_outline</mat-icon>
              <span matListItemTitle>Datos Personales</span>
            </a>
            <a mat-list-item routerLink="./alergias" routerLinkActive="active-link">
              <mat-icon matListItemIcon>sick</mat-icon>
              <span matListItemTitle>Alergias y Transf.</span>
            </a>
             <a mat-list-item routerLink="./antecedentes" routerLinkActive="active-link">
              <mat-icon matListItemIcon>assignment</mat-icon>
              <span matListItemTitle>Antecedentes</span>
            </a>
            <a mat-list-item routerLink="./medicacion" routerLinkActive="active-link">
              <mat-icon matListItemIcon>medication</mat-icon>
              <span matListItemTitle>Medicación</span>
            </a>
             <a mat-list-item routerLink="./historia" routerLinkActive="active-link">
              <mat-icon matListItemIcon>history</mat-icon>
              <span matListItemTitle>Historia Clínica</span>
            </a>
             <a mat-list-item routerLink="./dialisis" routerLinkActive="active-link">
              <mat-icon matListItemIcon>monitor_heart</mat-icon>
              <span matListItemTitle>Parám. Diálisis</span>
            </a>
             <a mat-list-item routerLink="./evolucion" routerLinkActive="active-link">
              <mat-icon matListItemIcon>assessment</mat-icon>
              <span matListItemTitle>Evolución Mensual</span>
            </a>
            <a mat-list-item routerLink="./qr" routerLinkActive="active-link">
              <mat-icon matListItemIcon>qr_code</mat-icon>
              <span matListItemTitle>Código QR</span>
            </a>
            </mat-nav-list>
        </mat-sidenav>

        <mat-sidenav-content class="content-panel" style="background-color: white;">
          <div style="padding: 20px 20px 0 20px;">
             <h2 style="margin: 0;">{{ paciente.nombre }} {{ paciente.apellido }}</h2>
             <p style="color: grey; margin-top: 5px;">ID: {{ paciente.id }} | Documento: {{ paciente.documento }}</p>
             <mat-divider style="margin-top: 15px;"></mat-divider>
          </div>

          <div style="padding: 20px;">
            <router-outlet></router-outlet>
          </div>

        </mat-sidenav-content>

      </mat-sidenav-container>
     } @else {
        <p style="padding: 20px;">No se encontraron datos para este paciente.</p>
     }
  } @else {
    <div style="text-align: center; padding: 40px;"> <p>Cargando datos del paciente...</p> </div>
  }
</div>
